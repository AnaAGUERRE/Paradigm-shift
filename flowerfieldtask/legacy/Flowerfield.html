{{ block content }}

<h3 class="text-center">Round {{ player.round_number }} / {{ C.NUM_ROUNDS }}</h3>
<h5 class="text-center">Total earnings: £{{ participant.payoff }}</h5>

<div id="field-container" class="text-center mt-4">
    <p>Feed the flowers by choosing two nutrients for each one.</p>
    <div id="flower-field"></div>
</div>

<div class="text-center mt-3">
    <button id="feedButton" class="btn btn-primary">Feed Flowers</button>
</div>

<div class="text-center mt-3">
    <h5>Growth: <span id="growthResult"></span></h5>
    <h5>Earnings: £<span id="pointsResult"></span></h5>
</div>

<script>
function getRandomNutrients() {
    // Placeholder: 3 fleurs avec des choix aléatoires
    const colors = ['red', 'blue', 'yellow'];
    let flowers = [];
    for (let i = 0; i < 3; i++) {
        let n1 = colors[Math.floor(Math.random() * 3)];
        let n2 = colors[Math.floor(Math.random() * 3)];
        flowers.push([n1, n2]);
    }
    return flowers;
}

$('#feedButton').on('click', function() {
    let nutrients = getRandomNutrients();
    liveSend({
        type: 'flowerSubmit',
        data: nutrients
    });
});

function liveRecv(data) {
    if (data.total_growth !== undefined) {
        $('#growthResult').text(data.total_growth);
        $('#pointsResult').text(data.total_points);
    }
}
</script>

{{ endblock }}

{# The JavaScript instructions.js handles the instructions’ content, 
but this HTML template is essential for page structure, navigation, and integration with oTree’s workflow. #}

{% extends "global/Page.html" %}
{% load static %}

{% block content %}
<div id="instructions-container">
    <h2>Instructions</h2>
        <div id="custom-instructions"></div>
        <script>
            window.isNoisyTreatment = true;
        </script>
        <script src="{% static 'js/instructions.js' %}"></script>
    <form method="post">
        {% csrf_token %}
        <button type="submit" class="btn btn-primary" style="margin-top:2em;">Start Experiment</button>
    </form>
</div>
{% endblock %}

<script>
// --- INACTIVITY TIMEOUT SCREENOUT ---
(function() {
    var timeoutDuration = 5 * 60 * 1000; // 5 minutes
    var screenoutUrl = 'https://app.prolific.com/submissions/complete?cc=SCREENOUT';
    var inactivityTimer = null;
    function resetInactivityTimer() {
        if (inactivityTimer) clearTimeout(inactivityTimer);
        inactivityTimer = setTimeout(function() {
            window.location.href = screenoutUrl;
        }, timeoutDuration);
    }
    ['mousemove', 'mousedown', 'keydown', 'touchstart', 'scroll'].forEach(function(evt) {
        window.addEventListener(evt, resetInactivityTimer, true);
    });
    resetInactivityTimer();
})();
</script>
